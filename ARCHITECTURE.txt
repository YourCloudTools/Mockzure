╔═══════════════════════════════════════════════════════════════════════╗
║                     MOCKZURE ARCHITECTURE                             ║
║                        Enhanced v2.0                                  ║
╚═══════════════════════════════════════════════════════════════════════╝

┌───────────────────────────────────────────────────────────────────────┐
│                         WEB PORTAL (Port 8090)                        │
│                        http://localhost:8090                          │
└───────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
        ┌──────────────────────────────────────────────────┐
        │              TABBED INTERFACE                    │
        │  ┌──────────┬──────────────┬──────────────┐     │
        │  │Resource  │  Entra ID    │  Settings    │     │
        │  │Groups ✓  │              │              │     │
        │  └──────────┴──────────────┴──────────────┘     │
        └──────────────────────────────────────────────────┘
                                   │
         ┌─────────────────────────┼─────────────────────────┐
         │                         │                         │
         ▼                         ▼                         ▼

╔════════════════════╗   ╔═══════════════════╗   ╔══════════════════╗
║  RESOURCE GROUPS   ║   ║    ENTRA ID       ║   ║    SETTINGS      ║
║                    ║   ║                   ║   ║                  ║
║  📁 rg-dev         ║   ║  👥 Users         ║   ║  📊 Statistics   ║
║  ├─ vm-web-01  ▶️  ║   ║  ├─ John Doe      ║   ║  ├─ Total VMs    ║
║  └─ vm-api-01  ⏹️  ║   ║  ├─ Jane Smith    ║   ║  ├─ Running      ║
║                    ║   ║  └─ Admin User    ║   ║  └─ Stopped      ║
║  📁 rg-prod        ║   ║                   ║   ║                  ║
║  └─ vm-web-prod ▶️ ║   ║  📱 App Regs      ║   ║  📋 Endpoints    ║
║                    ║   ║  (Empty)          ║   ║  🔄 Reset Data   ║
╚════════════════════╝   ╚═══════════════════╝   ╚══════════════════╝


╔═══════════════════════════════════════════════════════════════════════╗
║                        DATA MODEL STRUCTURE                           ║
╚═══════════════════════════════════════════════════════════════════════╝

┌───────────────────────────────────────────────────────────────────────┐
│                              STORE                                    │
│  ┌─────────────────────────────────────────────────────────────────┐ │
│  │  resourceGroups: []*ResourceGroup                               │ │
│  │  vms:            []*MockVM                                       │ │
│  │  users:          []*MockUser                                     │ │
│  │  clients:        map[string]*RegisteredClient                    │ │
│  │  codes:          map[string]*AuthCode                            │ │
│  └─────────────────────────────────────────────────────────────────┘ │
└───────────────────────────────────────────────────────────────────────┘
           │                    │                  │
           ▼                    ▼                  ▼
    
┌──────────────────┐   ┌──────────────┐   ┌───────────────────┐
│ Resource Groups  │   │     VMs      │   │  Users (Entra ID) │
├──────────────────┤   ├──────────────┤   ├───────────────────┤
│ • rg-dev         │   │ • vm-web-01  │   │ • John Doe        │
│   - East US      │   │ • vm-api-01  │   │ • Jane Smith      │
│   - Dev env      │   │ • vm-web-    │   │ • Admin User      │
│                  │   │   prod-01    │   │                   │
│ • rg-prod        │   │              │   │ Roles:            │
│   - West US      │   │ Status:      │   │ • Developer       │
│   - Prod env     │   │ • Running    │   │ • DevOps          │
└──────────────────┘   │ • Stopped    │   │ • Admin           │
                       └──────────────┘   └───────────────────┘


╔═══════════════════════════════════════════════════════════════════════╗
║                         API ENDPOINT MAP                              ║
╚═══════════════════════════════════════════════════════════════════════╝

Resource Groups
┌─────────────────────────────────────────────────────────────┐
│ GET  /mock/azure/resource-groups          → List all RGs    │
│ GET  /mock/azure/resource-groups/{name}   → Get RG + VMs    │
│ POST /mock/azure/resource-groups          → Create RG       │
└─────────────────────────────────────────────────────────────┘

Virtual Machines
┌─────────────────────────────────────────────────────────────┐
│ GET  /mock/azure/vms                      → List all VMs    │
│ GET  /mock/azure/vms/{name}               → Get VM          │
│ POST /mock/azure/vms                      → Create VM       │
│ POST /mock/azure/vms/{name}/start         → Start VM        │
│ POST /mock/azure/vms/{name}/stop          → Stop VM         │
│ POST /mock/azure/vms/{name}/restart       → Restart VM      │
│ POST /mock/azure/vms/{name}/tags          → Update tags     │
└─────────────────────────────────────────────────────────────┘

Entra ID - Users
┌─────────────────────────────────────────────────────────────┐
│ GET  /mock/azure/users                    → List users      │
│ GET  /mock/azure/users/{id}               → Get user        │
│ POST /mock/azure/users                    → Create user     │
└─────────────────────────────────────────────────────────────┘

Entra ID - Apps
┌─────────────────────────────────────────────────────────────┐
│ GET  /mock/azure/apps                     → List apps       │
│ POST /mock/azure/apps                     → Register app    │
└─────────────────────────────────────────────────────────────┘

OAuth2/OIDC
┌─────────────────────────────────────────────────────────────┐
│ GET  /.well-known/openid-configuration   → Discovery        │
│ GET  /oauth2/v2.0/authorize               → Auth code       │
│ POST /oauth2/v2.0/token                   → Exchange token  │
│ GET  /oidc/userinfo                       → User info       │
└─────────────────────────────────────────────────────────────┘


╔═══════════════════════════════════════════════════════════════════════╗
║                       RESOURCE ORGANIZATION                           ║
╚═══════════════════════════════════════════════════════════════════════╝

┌───────────────────────────────────────────────────────────────────────┐
│                    RESOURCE GROUP MANAGED                             │
│                      (Compute Resources)                              │
│                                                                       │
│  ┌─────────────────────┐         ┌─────────────────────┐            │
│  │      rg-dev         │         │      rg-prod        │            │
│  │    East US          │         │    West US          │            │
│  ├─────────────────────┤         ├─────────────────────┤            │
│  │ 💻 vm-web-01        │         │ 💻 vm-web-prod-01   │            │
│  │    Running          │         │    Running          │            │
│  │    Standard_B2s     │         │    Standard_D2s_v3  │            │
│  │    Linux            │         │    Linux            │            │
│  │                     │         │                     │            │
│  │ 💻 vm-api-01        │         └─────────────────────┘            │
│  │    Stopped          │                                            │
│  │    Standard_B2s     │                                            │
│  │    Linux            │                                            │
│  └─────────────────────┘                                            │
└───────────────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────────────┐
│                  GLOBAL RESOURCES (Entra ID)                          │
│                  (Not tied to resource groups)                        │
│                                                                       │
│  ┌──────────────────────────────────────────────────────────────┐   │
│  │  USERS                                                        │   │
│  ├──────────────────────────────────────────────────────────────┤   │
│  │  👤 John Doe          john.doe@company.com                    │   │
│  │     Senior Developer                                          │   │
│  │     Access: rg-dev                                            │   │
│  │                                                               │   │
│  │  👤 Jane Smith        jane.smith@company.com                  │   │
│  │     DevOps Engineer                                           │   │
│  │     Access: rg-dev, rg-prod                                   │   │
│  │                                                               │   │
│  │  👤 Admin User        admin@company.com                       │   │
│  │     System Administrator                                      │   │
│  │     Access: All resource groups                               │   │
│  └──────────────────────────────────────────────────────────────┘   │
│                                                                       │
│  ┌──────────────────────────────────────────────────────────────┐   │
│  │  APP REGISTRATIONS (OAuth2/OIDC Clients)                      │   │
│  ├──────────────────────────────────────────────────────────────┤   │
│  │  (Initially empty - populated when apps register)             │   │
│  │  • Sandman will register here when configured                 │   │
│  └──────────────────────────────────────────────────────────────┘   │
└───────────────────────────────────────────────────────────────────────┘


╔═══════════════════════════════════════════════════════════════════════╗
║                          UI FLOW DIAGRAM                              ║
╚═══════════════════════════════════════════════════════════════════════╝

User Opens Browser
        │
        ▼
http://localhost:8090
        │
        ▼
┌───────────────────────────────────────────────────┐
│              MOCKZURE PORTAL HEADER               │
│  [🔵] Mockzure Portal                    :8090    │
└───────────────────────────────────────────────────┘
        │
        ▼
┌───────────────────────────────────────────────────┐
│                    TAB BAR                        │
│  [Resource Groups] [Entra ID] [Settings]         │
└───────────────────────────────────────────────────┘
        │
        ├─[Tab 1]───────────> Resource Groups View
        │                     • Show rg-dev
        │                       ├─ vm-web-01 [Start] [Stop]
        │                       └─ vm-api-01 [Start] [Stop]
        │                     • Show rg-prod
        │                       └─ vm-web-prod-01 [Start] [Stop]
        │
        ├─[Tab 2]───────────> Entra ID View
        │                     • Users Table (3 users)
        │                     • App Registrations (empty/populated)
        │
        └─[Tab 3]───────────> Settings View
                              • Stats: 3 VMs, 2 Running, 1 Stopped
                              • API Endpoints List
                              • [Reset] [Clear] Buttons


╔═══════════════════════════════════════════════════════════════════════╗
║                         TECHNOLOGY STACK                              ║
╚═══════════════════════════════════════════════════════════════════════╝

Backend:
  • Go (Golang) - Main language
  • net/http - HTTP server
  • encoding/json - JSON handling
  • In-memory data store

Frontend:
  • HTML5
  • Tailwind CSS - Styling
  • Vanilla JavaScript - Interactivity
  • No framework dependencies

Design:
  • Purple/Blue gradient theme
  • Responsive layout
  • Modern card-based UI
  • Status indicators with colors

Port: 8090 (Default)


═══════════════════════════════════════════════════════════════════════
                              END OF DIAGRAM
═══════════════════════════════════════════════════════════════════════

