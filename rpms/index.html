<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mockzure RPM Repository</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            padding: 2rem;
        }
        
        .section {
            margin-bottom: 2rem;
        }
        
        .section h2 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
        }
        
        .package-list {
            list-style: none;
        }
        
        .package-item {
            background: #f7fafc;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .package-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        
        .package-name {
            font-weight: 600;
            color: #2d3748;
            font-family: 'Courier New', monospace;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: transform 0.2s;
        }
        
        .download-btn:hover {
            transform: scale(1.05);
        }
        
        .code-block {
            background: #1a202c;
            color: #68d391;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .code-block pre {
            margin: 0;
        }
        
        .note {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        
        .footer {
            text-align: center;
            padding: 2rem;
            color: #718096;
            border-top: 1px solid #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì¶ Mockzure RPM Repository</h1>
            <p>Mock Azure Service - Development & Testing</p>
        </div>
        
        <div class="content">
            <div class="section">
                <h2>Available Packages</h2>
                <ul class="package-list" id="package-list">
                    <!-- Packages will be inserted here by JavaScript -->
                </ul>
            </div>
            
            <div class="section">
                <h2>Installation Instructions</h2>
                
                <h3 style="margin: 1rem 0 0.5rem 0; color: #2d3748;">Using DNF/TDNF (Recommended)</h3>
                <div class="code-block">
                    <pre># Add repository configuration
sudo tee /etc/yum.repos.d/mockzure.repo << 'REPO'
[mockzure]
name=Mockzure RPM Repository
baseurl=https://yourcloudtools.github.io/Mockzure/rpms
enabled=1
gpgcheck=0
REPO

# Install the latest version
sudo dnf install mockzure

# Or install specific version
sudo dnf install mockzure-20241011.143055</pre>
                </div>
                
                <h3 style="margin: 1.5rem 0 0.5rem 0; color: #2d3748;">Direct Download</h3>
                <div class="code-block">
                    <pre># Download and install latest
curl -LO https://yourcloudtools.github.io/Mockzure/rpms/mockzure-latest.rpm
sudo dnf install -y mockzure-latest.rpm

# Or download specific version
curl -LO https://yourcloudtools.github.io/Mockzure/rpms/mockzure-VERSION.rpm
sudo dnf install -y mockzure-VERSION.rpm</pre>
                </div>
            </div>
            
            <div class="section">
                <h2>Post-Installation</h2>
                <div class="code-block">
                    <pre># Enable and start the service
sudo systemctl enable mockzure
sudo systemctl start mockzure

# Check status
sudo systemctl status mockzure

# View logs
sudo journalctl -u mockzure -f</pre>
                </div>
                
                <div class="note">
                    <strong>üìù Note:</strong> After installation, configure the service in <code>/etc/mockzure/config.json</code> before starting.
                </div>
            </div>
            
            <div class="section">
                <h2>About Mockzure</h2>
                <p style="line-height: 1.6; color: #4a5568;">
                    Mockzure is a lightweight mock Azure API server that simulates Azure Resource Manager 
                    and Entra ID (Azure AD) endpoints for testing and development purposes. It provides 
                    a complete mock environment for VM management, user authentication, and OIDC/OAuth2 flows.
                </p>
                <ul style="margin-top: 1rem; padding-left: 1.5rem; line-height: 1.8; color: #4a5568;">
                    <li>Mock Azure Resource Manager endpoints</li>
                    <li>Simulated Entra ID (Azure AD) authentication</li>
                    <li>OIDC/OAuth2 support for testing</li>
                    <li>Web-based management portal</li>
                    <li>Systemd service integration</li>
                </ul>
            </div>
        </div>
        
        <div class="footer">
            <p>Part of the <a href="https://github.com/yourcloudtools/Mockzure" style="color: #667eea; text-decoration: none;">Mockzure</a> project by YourCloudTools</p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem;">Built with ‚ù§Ô∏è for the developer community</p>
        </div>
    </div>
    
    <script>
        // Fetch and display available packages
        async function loadPackages() {
            try {
                const response = await fetch('./');
                const text = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');
                
                const links = doc.querySelectorAll('a');
                const packages = [];
                
                links.forEach(link => {
                    const href = link.getAttribute('href');
                    if (href && href.endsWith('.rpm') && !href.includes('mockzure-latest')) {
                        packages.push(href);
                    }
                });
                
                // Sort packages by version (newest first)
                packages.sort().reverse();
                
                // Add latest symlink at the top
                packages.unshift('mockzure-latest.rpm');
                
                const packageList = document.getElementById('package-list');
                
                if (packages.length === 0) {
                    packageList.innerHTML = '<li class="package-item"><span class="package-name">No packages available yet</span></li>';
                    return;
                }
                
                packageList.innerHTML = packages.map(pkg => {
                    const isLatest = pkg === 'mockzure-latest.rpm';
                    const label = isLatest ? `${pkg} (Latest)` : pkg;
                    return `
                        <li class="package-item">
                            <span class="package-name">${label}</span>
                            <a href="${pkg}" class="download-btn" download>Download</a>
                        </li>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error loading packages:', error);
                document.getElementById('package-list').innerHTML = 
                    '<li class="package-item"><span class="package-name">Error loading packages</span></li>';
            }
        }
        
        // Load packages when page loads
        loadPackages();
    </script>
</body>
</html>
